{% extends 'blog_app/base.html' %}
{% load crispy_forms_tags %}<!--enables us use bootstrap through crispy -->
{% block content%}
  <div class="content-section">
      <div class="media">
          <img src="{{ user.profile.image.url }}" alt="dp" class="rounded-circle account-img">
          <div class="media-body">
              <h2 class="account-heading">{{ user.username }}</h2>
              <p class="text-secondary">{{ user.email }}</p>
          </div>
      </div>
      <form method="POST" enctype="multipart/form-data"><!--enctype ensures that images are saved in the background-->
        {% csrf_token %}
        <fieldset class="form-group">
            <legend class="border-bottom mb-4">Profile Info</legend>
            <!--Adds both profile and user update forms such that they appear on the same page-->
            {{ u_form|crispy }}
            {{ p_form|crispy }}
  
        </fieldset>
        <div class="form-group">
            <button class="btn btn-outline-info" type="submit">Update</button>
        </div>     
      </form>
  </div>
<!--line below fixes a bug, able to see current image file in bootstrap4.
otherwise use bootstrap3.-->
<script>document.querySelector(".custom-file-label").className += " mt-5"</script>
{% endblock content %}
 